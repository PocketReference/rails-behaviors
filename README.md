# Rails Behaviors

Rails Behaviors implements the `data-*` behaviors generated by Rails 3.x.

See more about setup and installation steps at https://github.com/josh/rails-behaviors.


## Remote

    #= require rails/remote

### Markup

#### `<a>`

``` markup-table
`data-remote`
  Enables remote behavior on the element if set to anything.

`data-method`
  Changes the method of the AJAX request. Defaults to `"get"`. Maps to
  jQuery's [type](http://api.jquery.com/jQuery.ajax/).

`href`
  URL for AJAX request. Defaults to the current url. Maps to jQuery's
  [`url`](http://api.jquery.com/jQuery.ajax/).

`data-type`
  Specify the data type of the response. Can be `"xml"`, `"json"`,
  `"script"`, or `"html"`. Defaults to jQuery's *"intelligent guess"*
  from the response content type. Maps to jQuery's
  [`dataType`](http://api.jquery.com/jQuery.ajax/).
```

``` html
<a href="/toggle" data-method="post" data-remote>Toggle</a>
```

#### `<form>`

``` markup-table
`data-remote`
  Enables remote behavior on the element if set to anything.

`method`
  Changes the method of the AJAX request. Defaults to `"get"`. Maps to
  jQuery's [type](http://api.jquery.com/jQuery.ajax/).

`action`
  URL for AJAX request. Defaults to the current url. Maps to jQuery's
  [`url`](http://api.jquery.com/jQuery.ajax/).

`data-type`
  Specify the data type of the response. Can be `"xml"`, `"json"`,
  `"script"`, or `"html"`. Defaults to jQuery's *"intelligent guess"*
  from the response content type. Maps to jQuery's
  [`dataType`](http://api.jquery.com/jQuery.ajax/).
```

``` html
<form action="/comment" method="post" data-remote></form>
```


### Events

See jQuery's [AJAX event documentation](http://docs.jquery.com/Ajax_Events) for a complete reference.

#### `ajaxBeforeSend`

This event, which is triggered before an Ajax request is started, allows you to modify the XMLHttpRequest object (setting additional headers, if need be.)

``` events-table
Synchronicity  - Sync
Bubbles        - Yes
Cancelable     - Yes
Default action - Sends request
Target         - `a` or `form` element with `[data-remote]`
Extra arguments
  [`jqXHR`](http://api.jquery.com/jQuery.ajax/#jqXHR) - XMLHttpRequest like object
  [`settings`](http://api.jquery.com/jQuery.ajax/#jQuery-ajax-settings) - Object passed as `$.ajax` settings
```

#### `ajaxSuccess`

This event is only called if the request was successful (no errors from the server, no errors with the data).

``` events-table
Synchronicity  - Sync
Bubbles        - Yes
Cancelable     - No
Target         - `a` or `form` element with `[data-remote]`
Extra arguments
  [`jqXHR`](http://api.jquery.com/jQuery.ajax/#jqXHR) - XMLHttpRequest like object
  [`settings`](http://api.jquery.com/jQuery.ajax/#jQuery-ajax-settings) - Object passed as `$.ajax` settings
  `data` - The data returned from the server
```

#### `ajaxError`

This event is only called if an error occurred with the request (you can never have both an error and a success callback with a request).

``` events-table
Synchronicity  - Sync
Bubbles        - Yes
Cancelable     - No
Target         - `a` or `form` element with `[data-remote]`
Extra arguments
  [`jqXHR`](http://api.jquery.com/jQuery.ajax/#jqXHR) - XMLHttpRequest like object
  `textStatus` - `"timeout"`, `"error"`, `"abort"`, or `"parsererror"`
  `errorThrown` - Exception object
```

#### `ajaxComplete`

This event is called regardless of if the request was successful, or not. You will always receive a complete callback, even for synchronous requests.

``` events-table
Synchronicity  - Sync
Bubbles        - Yes
Cancelable     - No
Target         - `a` or `form` element with `[data-remote]`
Extra arguments
  [`jqXHR`](http://api.jquery.com/jQuery.ajax/#jqXHR) - XMLHttpRequest like object
  `textStatus` - `"timeout"`, `"error"`, `"abort"`, or `"parsererror"`
```

``` coffeescript
$(document).on 'ajaxBeforeSend', '.new-comment', ->
  $(this).addClass 'loading'

$(document).on 'ajaxComplete', '.new-comment', ->
   $(this).removeClass 'loading'

$(document).on 'ajaxSuccess', '.new-comment', (event, xhr, settings, data) ->
  $('.comments').append data.commentHTML

$(document).on 'ajaxError', '.new-comment', ->
  alert "Something went wrong!"
```


## Method

    #= require rails/method

Allow links to be followed with an alternate method.

### Markup

`<a>`

``` markup-table
`data-method`
  Method for following `href`. Can be `"post"`, `"put"`, or
  `"delete"`. `"get"` is ignored since its the default behavior for
  links.
```

``` html
<a href="/posts/1" data-method="delete">Delete</a>
```


## Confirm

    #= require rails/confirm

Prompts native confirm dialog before activating link.

### Markup

#### `<a>`

``` markup-table
`data-confirm` - Message to pass to `confirm()`.
```

``` html
<a href="/" data-confirm="Are you sure?">Delete</a>
```


## Disable

    #= require rails/disable

Disables clicked submit input or button with text.

### Markup

`<input type=submit>` or `<button type=submit>`

``` markup-table
`data-disable-with` - Message to set `<input>` value or `<button>` innerHTML to.
```


``` html
<input type="submit" data-disable-with="Submitting...">
```


## Accept

    #= require rails/accept

Modifies the default `$.ajax` Accept header to work nicer with Rails' `respond_to` conventions.


## CSRF

    #= require rails/csrf

Adds CSRF tokens to AJAX requests and forms missing them.
